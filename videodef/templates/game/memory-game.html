{% extends 'base.html' %}
{% load static %}

{% block style %}
<link rel="stylesheet" href="{% static 'css/game/memory-game.css' %}" />
{% endblock %}

{% block page_name %}–ü–æ–∏—Å–∫ –ø–∞—Ä{% endblock %}

{% block content %}
<div class="memory-page-wrapper">
    <!-- –ò–≥—Ä–æ–≤–∞—è –∑–æ–Ω–∞: —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–µ –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ –∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ -->
    <div id="memory-game-area" class="memory-game-area">
        <!-- –û–±—ë—Ä—Ç–∫–∞ –¥–ª—è –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è –∏ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –ø–æ–±–µ–¥–µ. -->
        <div id="memory-game-wrapper" class="memory-game-wrapper">
            <p class="initial-message">–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –Ω–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å –∏–≥—Ä—É".</p>
        </div>
        <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∏–≥—Ä—ã –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–æ –∏ –≤—Å—Ç–∞–≤–ª–µ–Ω–æ —Å—é–¥–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ JavaScript'–æ–º -->
    </div>

    <!-- –ü–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–≥—Ä—ã (—Å–ø—Ä–∞–≤–∞ –æ—Ç –∏–≥—Ä–æ–≤–æ–π –∑–æ–Ω—ã) -->
    <div id="memory-game-settings" class="game-settings-panel">
        <div class="settings-content-inner">
            <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã</h2>

            <!-- –ü–æ–ª–µ –¥–ª—è –≤–≤–æ–¥–∞ –Ω–∞–∑–≤–∞–Ω–∏—è –∏–≥—Ä—ã -->
            <label for="game-name">–ù–∞–∑–≤–∞–Ω–∏–µ –∏–≥—Ä—ã:</label>
            <input type="text" id="game-name" placeholder="–ú–æ—è –∏–≥—Ä–∞ –≤ –ø–∞—Ä—ã">

            <!-- –í—ã–±–æ—Ä –Ω–∞–±–æ—Ä–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ -->
            <h3>–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–±–æ—Ä –∫–∞—Ä—Ç–æ—á–µ–∫:</h3>
            <div class="presets-container"> <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –Ω–∞–±–æ—Ä–æ–≤ -->
                <div class="preset-set" data-set-name="fruits">–§—Ä—É–∫—Ç—ã üçì</div>
                <div class="preset-set" data-set-name="animals">–ñ–∏–≤–æ—Ç–Ω—ã–µ üêº</div>
            </div>

            <!-- –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π -->
            <label for="custom-images-input" class="upload-label">
                –ò–õ–ò –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å–≤–æ–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:
            </label>
            <input type="file" id="custom-images-input" accept="image/*" multiple>
            
            <!-- –û–±–ª–∞—Å—Ç—å –¥–ª—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π -->
            <div id="custom-images-preview" class="image-preview-container" style="display: none;"> <!-- –ö–ª–∞—Å—Å –∏–∑–º–µ–Ω–µ–Ω –¥–ª—è —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ -->
                <p id="custom-images-info-text">–ó–∞–≥—Ä—É–∂–µ–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: <span id="custom-images-count">0</span></p>
                <div class="preview-grid"></div>
            </div>

            <!-- –í—ã–±–æ—Ä —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–∞—Ä) -->
            <label for="pair-count-select">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä:</label>
            <select id="pair-count-select">
                <option value="2">2 –ø–∞—Ä—ã</option>
                <option value="3">3 –ø–∞—Ä—ã</option>
                <option value="4" selected>4 –ø–∞—Ä—ã</option>
                <option value="5">5 –ø–∞—Ä</option>
                <option value="6">6 –ø–∞—Ä</option> 
            </select>
            
            <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞/–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∏–≥—Ä—ã -->
            <div class="settings-buttons">
                <button id="start-memory-game">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    const isAuthenticated = {% if request.user.is_authenticated %}true{% else %}false{% endif %};
    const loginUrl = "{% url 'login' %}?next=" + window.location.pathname;
    const presetImagesBasePath = "{% static 'images/memory_game_presets/' %}"; 
</script>
<script src="{% static 'js/game/memory_game.bundle.js' %}"></script>
<!-- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ DOM -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        if (typeof window.MemoryGameModule !== 'undefined' && typeof window.MemoryGameModule.createMemoryGameSeparately === 'function') {
            window.MemoryGameModule.createMemoryGameSeparately();
        } else {
            console.error("–§—É–Ω–∫—Ü–∏—è createMemoryGameSeparately –Ω–µ –Ω–∞–π–¥–µ–Ω–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–±–æ—Ä–∫—É Webpack –∏ —ç–∫—Å–ø–æ—Ä—Ç —Ñ—É–Ω–∫—Ü–∏–∏.");
        }
    });
</script>
{% endblock %}