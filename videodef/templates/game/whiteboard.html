{% extends 'base.html' %} 
{% load static %}
{% block style %}
<link rel="stylesheet" href="{% static 'css/game/whiteboard.css' %}" />
<link rel="stylesheet" href="{% static 'css/game/puzzles.css' %}" />
<link rel="stylesheet" href="{% static 'css/game/memory_game.css' %}" />
<link rel="stylesheet" href="{% static 'css/game/game_settings_panel.css' %}" />
<link rel="stylesheet" href="{% static 'css/game/game_load_window.css' %}" />
{% endblock %}

{% block page_name %}–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ—Å–∫–∞{% endblock %}

{% block content %}
<div class="board-container">
    <div class="drawing-area">
        <!-- –ü–∞–Ω–µ–ª—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ -->
        <div class="toolbar">
            <button id="pen_btn" class="tool active">‚úèÔ∏è –ö–∏—Å—Ç—å</button>
            <button id="eraser_btn" class="tool">üßΩ –õ–∞—Å—Ç–∏–∫</button>

            <label for="colorPicker">–¶–≤–µ—Ç:</label>
            <input type="color" id="colorPicker" value="#000000">

            <label for="thickness">–¢–æ–ª—â–∏–Ω–∞:</label>
            <input type="range" id="thickness" min="1" max="20" value="2">

            <div class="dropdown">
                <button id="games_btn" class="tool">üéÆ –ò–≥—Ä—ã ‚ñº</button>
            </div>
            <div class="dropdown-content" id="game-menu">
                <div class="game-option" data-name="puzzles">üß© –ü–∞–∑–ª—ã</div>
                <div class="game-option" data-name="memory-game">üîç –ü–æ–∏—Å–∫ –ø–∞—Ä</div>
                <div class="game-option" data-name="cut-images">‚úÇÔ∏è –†–∞–∑—Ä–µ–∑–Ω—ã–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏</div>
                <div class="game-option" data-name="grid-draw">üìê –î–æ—Ä–∏—Å–æ–≤–∞—Ç—å –ø–æ –∫–ª–µ—Ç–æ—á–∫–∞–º</div>
            </div>

            <button id="toggle-settings-btn">–û—Ç–∫—Ä—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>

            <input type="file" id="img-upload" title="–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">
            <button id="clear_btn">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å —Ö–æ–ª—Å—Ç</button>
        </div>

        <!-- –•–æ–ª—Å—Ç –¥–ª—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è -->
        <div class="canvas-wrapper">
            <canvas id="image-layer" class="canvas-layer" style="z-index: 0;"></canvas>
            <canvas id="draw-layer" class="canvas-layer" style="z-index: 1;"></canvas>
        </div>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–≥—Ä -->
<div id="load-puzzle-modal" class="modal-overlay" style="display: none;">
    <div class="modal-container">
        <h2>–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é –∏–≥—Ä—É</h2>
        <div id="load-list-container">
            <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>
        </div>
        <div class="modal-buttons">
            <button id="load-confirm-btn" disabled>–ó–∞–≥—Ä—É–∑–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–π</button>
            <button id="load-cancel-btn">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>
</div>

{% endblock %}

{% block horizontal_right %}
<!-- –ü–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
<div class="settings-panel hidden">
    <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
    <button class="panel-button">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ö–æ–ª—Å—Ç</button>
    <button class="panel-button">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ö–æ–ª—Å—Ç</button>
</div>
{% endblock %}

{% block scripts %}
<script>
    const isAuthenticated = {% if request.user.is_authenticated %}true{% else %}false{% endif %};
    const loginUrl = "{% url 'login' %}?next=" + window.location.pathname;
    const images = "{% static 'images' %}";
    const savePuzzleUrl = "{% url 'save_puzzle' %}";
    const updatePuzzleBaseUrl = "{% url 'update_puzzle' game_id="0" %}".replace('/0/', '/'); 
    const loadPuzzlesUrl = "{% url 'load_puzzles' %}";
    const csrfToken = "{{ csrf_token }}";
</script>
<script src="{% static 'js/game/whiteboard.bundle.js' %}"></script>
{% endblock %}